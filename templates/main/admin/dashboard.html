{% extends 'base.html' %}

{% block title %}Admin Dashboard - Restaurant{% endblock %}

{% block content %}
<div class="admin-page">
    <div class="admin-header">
        <div class="container">
            <h1>Admin Dashboard</h1>
            <p>Manage orders and reservations</p>
        </div>
    </div>
    
    <div class="container">
        <!-- Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">ğŸ“¦</div>
                <div class="stat-info">
                    <h3>{{ total_orders }}</h3>
                    <p>Total Orders</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">â³</div>
                <div class="stat-info">
                    <h3>{{ pending_orders }}</h3>
                    <p>Pending Orders</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“…</div>
                <div class="stat-info">
                    <h3>{{ total_reservations }}</h3>
                    <p>Total Reservations</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">âœ“</div>
                <div class="stat-info">
                    <h3>{{ upcoming_reservations }}</h3>
                    <p>Upcoming</p>
                </div>
            </div>
        </div>
        
        <!-- Quick Links -->
        <div class="admin-nav-cards">
            <a href="{% url 'main:admin_orders' %}" class="admin-nav-card">
                <div class="admin-nav-icon">ğŸ“¦</div>
                <h3>Manage Orders</h3>
                <p>View and update order status</p>
            </a>
            <a href="{% url 'main:admin_reservations' %}" class="admin-nav-card">
                <div class="admin-nav-icon">ğŸ“…</div>
                <h3>Manage Reservations</h3>
                <p>View and update reservations</p>
            </a>
        </div>
        
        <!-- Recent Activity -->
        <div class="admin-content-grid">
            <div class="card">
                <h3>Recent Orders</h3>
                {% if recent_orders %}
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Order #</th>
                                <th>Customer</th>
                                <th>Type</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for order in recent_orders %}
                            <tr>
                                <td><a href="{% url 'main:admin_order_detail' order.id %}">{{ order.order_number }}</a></td>
                                <td>{{ order.user.username }}</td>
                                <td>{{ order.get_order_type_display }}</td>
                                <td>Â£{{ order.total }}</td>
                                <td><span class="badge badge-{{ order.status }}">{{ order.get_status_display }}</span></td>
                                <td>{{ order.created_at|date:"d M, H:i" }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <a href="{% url 'main:admin_orders' %}" class="btn btn-outline">View All Orders</a>
                {% else %}
                <p>No orders yet.</p>
                {% endif %}
            </div>
            
            <div class="card">
                <h3>Recent Reservations</h3>
                {% if recent_reservations %}
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Reservation #</th>
                                <th>Customer</th>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Guests</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for res in recent_reservations %}
                            <tr>
                                <td>{{ res.reservation_number }}</td>
                                <td>{{ res.user.username }}</td>
                                <td>{{ res.date|date:"d M Y" }}</td>
                                <td>{{ res.time|time:"H:i" }}</td>
                                <td>{{ res.guests }}</td>
                                <td><span class="badge badge-{{ res.status }}">{{ res.get_status_display }}</span></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <a href="{% url 'main:admin_reservations' %}" class="btn btn-outline">View All Reservations</a>
                {% else %}
                <p>No reservations yet.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
